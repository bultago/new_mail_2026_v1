<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE struts PUBLIC
	"-//Apache Software Foundation//DTD Struts Configuration 2.3//EN"
	"http://struts.apache.org/dtds/struts-2.3.dtd">    

<struts>
	
    <constant name="struts.action.extension" value="do" />
	<constant name="struts.objectFactory" value="org.apache.struts2.spring.StrutsSpringObjectFactory" />
	<constant name="struts.objectFactory.apring.autoWire" value="name" />
	<constant name="struts.multipart.maxSize" value="1073742824" />	
	<constant name="struts.action.excludePattern" value=".*~.*"/>
	
	<package name="tims-default" abstract="true" extends="struts-default">
		 <interceptors>
	        <interceptor-stack name="timsStack">
	             <interceptor-ref name="exception"/>             
	             <interceptor-ref name="servletConfig"/>
	             <interceptor-ref name="prepare"/>
	             <interceptor-ref name="chain"/>
	             <interceptor-ref name="scopedModelDriven"/>
	             <interceptor-ref name="modelDriven"/>
	             <interceptor-ref name="fileUpload"/>
	             <interceptor-ref name="checkbox"/>
	             <interceptor-ref name="staticParams"/>
	             <interceptor-ref name="params">
	               <param name="excludeParams">dojo\..*</param>
	             </interceptor-ref>
	             <interceptor-ref name="conversionError"/>
	         </interceptor-stack>
         </interceptors>
         
         <default-interceptor-ref name="timsStack"/>
         
		<global-results>
			<result name="errorAlert">/common/alertProcess.jsp</result>
			<result name="errorBack">/common/alertBack.jsp</result>
			<result name="mainError">/common/error/mainError.jsp</result>
			<result name="moveWelcome" type="redirectAction">
	            <param name="actionName">welcome</param>
	            <param name="namespace">/common</param>
	        </result>	        
	        <result name="subError">/common/error/subError.jsp</result>
	        <result name="subError2">/common/error/subError2.jsp</result>
	        <result name="errorMobile">/mobile/basic/common/error.jsp</result>
	        <result name="paidError">/common/error/paidError.jsp</result>
		</global-results>
		
		<global-exception-mappings>
            <exception-mapping 
            	exception="org.springframework.mail.MailAuthenticationException" 
            	result="moveWelcome"/>
            	
            <exception-mapping 
            	exception="java.lang.Exception" 
            	result="mainError"/>
        </global-exception-mappings> 
       
	</package>
	
	<package name="tims-jmobile-default" abstract="true" extends="struts-default">
		 <interceptors>
	        <interceptor-stack name="timsStack">
	             <interceptor-ref name="exception"/>             
	             <interceptor-ref name="servletConfig"/>
	             <interceptor-ref name="prepare"/>
	             <interceptor-ref name="chain"/>
	             <interceptor-ref name="scopedModelDriven"/>
	             <interceptor-ref name="modelDriven"/>	             
	             <interceptor-ref name="staticParams"/>
	             <interceptor-ref name="params">
	               <param name="excludeParams">dojo\..*</param>
	             </interceptor-ref>
	             <interceptor-ref name="conversionError"/>
	         </interceptor-stack>
         </interceptors>
         
         <default-interceptor-ref name="timsStack"/>
         
		<global-results>
			<result name="errorAlert">/mobile/simple/common/alert.jsp</result>
			<result name="moveWelcome" type="redirect">/jm/welcome.do</result>
			<result name="expireSession">/mobile/simple/common/expireSession.jsp</result>
		</global-results>
		
		<global-exception-mappings>
            <exception-mapping 
            	exception="org.springframework.mail.MailAuthenticationException" 
            	result="expireSession"/>
            	
            <exception-mapping 
            	exception="java.lang.Exception" 
            	result="errorAlert"/>
        </global-exception-mappings> 
       
	</package>
	
	<package name="tims-hybrid-default" abstract="true" extends="struts-default">
		 <interceptors>
	        <interceptor-stack name="timsStack">
	             <interceptor-ref name="exception"/>             
	             <interceptor-ref name="servletConfig"/>
	             <interceptor-ref name="prepare"/>
	             <interceptor-ref name="chain"/>
	             <interceptor-ref name="scopedModelDriven"/>
	             <interceptor-ref name="modelDriven"/>	             
	             <interceptor-ref name="staticParams"/>
	             <interceptor-ref name="params">
	               <param name="excludeParams">dojo\..*</param>
	             </interceptor-ref>
	             <interceptor-ref name="conversionError"/>
	         </interceptor-stack>
         </interceptors>
         
         <default-interceptor-ref name="timsStack"/>
         
		<global-results>
			<result name="errorPage">/common/error/hybridError.jsp</result>
		</global-results>
		
		<global-exception-mappings>

            <exception-mapping 
            	exception="java.lang.Exception" 
            	result="errorPage"/>	   	
        </global-exception-mappings> 
       
	</package>
	
    <include file="web-config/struts-common.xml"/>
    <include file="web-config/struts-mail.xml"/>
    <include file="web-config/struts-addr.xml"/>
    <include file="web-config/struts-calendar.xml"/>
    <include file="web-config/struts-setting.xml"/>
    <include file="web-config/struts-bbs.xml"/>
    <include file="web-config/struts-webfolder.xml"/>
    <include file="web-config/struts-organization.xml"/>    
    <include file="web-config/struts-portlet.xml"/>
    <include file="web-config/struts-register.xml"/>
    <include file="web-config/struts-mobile.xml"/>
    <include file="web-config/struts-jmobile.xml"/>
    <include file="web-config/struts-note.xml"/>
</struts>
